/*! tokeninput - v0.1.0 - 2015-01-24
* Copyright (c) 2015 Paulo Leal; Licensed GPL */
!function(a){a.tokeninput={defaultOptions:{}},a.fn.tokeninput=function(b){var c="tokeninput",d=c+"-input-field",e=c+"-hidden-fields",f=c+"-visible-labels",g=c+"-delete";b=a.extend({},a.tokeninput.defaultOptions,b);var h=function(b){return a("<div></div>",b)},i=function(b){return a("<ul></ul>",b)},j=function(a){var g=h({"class":c+" "+b["class"]});return g.append(h({"class":e}).hide()),g.append(i({"class":f})),g.append(a.clone().removeAttr("name").addClass(d)),g};return this.each(function(){var b=a(this),c=b.attr("name"),h=j(b),i=b.prev();b.remove(),h.insertAfter(i);var k=function(b){var c=!1;return h.find("."+e+" > input").each(function(){a(this).val()===b&&(c=!0)}),c},l=function(){var b=a(this),c=h.find(".tokeninput-visible-labels > li").toArray().indexOf(b.parent()[0]);h.find("."+e+" > input")[c].remove(),h.find("."+f+" > li")[c].remove()},m=function(b,c,d){var i=a("<a></a>",{"class":g,href:""}).html("X");i.on("click",l);var j=a("<input/>",{name:name,type:"hidden",value:d}),k=a("<li></li>").html(c).append(i);h.find("."+e).append(j),h.find("."+f).append(k)};h.find("."+d).on("keydown",function(b){var d=b.keyCode||b.which,e=[9,188,186,13];if(e.indexOf(d)>=0){b.preventDefault();var f=a(b.target),g="O-"+f.val()+"-O",h=a(b.target).val();k(h)||(m(c,g,h),f.val(""))}})})}}(jQuery);